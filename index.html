<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„å¯¼èˆªç«™</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="parallax-wrapper">
        <div class="parallax-layer" data-speed="0.1"></div>
        <div class="parallax-layer" data-speed="0.3"></div>
    </div>

    <div class="fab-container">
        <button class="fab-main" onclick="toggleFabMenu()">+</button>
        <div class="fab-menu">
            <button onclick="toggleEffect()">ğŸ¨ åˆ‡æ¢æ•ˆæœ</button>
            <button onclick="showBgControl()">ğŸŒ… æ›´æ¢èƒŒæ™¯</button>
            <button onclick="toggleLinkManager()">ğŸ“ ç®¡ç†é“¾æ¥</button>
        </div>
    </div>

    <div id="bg-control" class="popup-panel">
        <h3>èƒŒæ™¯è®¾ç½®</h3>
        <input type="text" id="bg-input" placeholder="å›¾ç‰‡URL">
        <div class="button-group">
            <button onclick="changeBackground()">åº”ç”¨</button>
            <button onclick="resetBackground()">é‡ç½®</button>
            <button onclick="closePanels()">å…³é—­</button>
        </div>
    </div>

    <section id="link-manager" class="management-panel" style="display: none;">
        <div class="panel-header" onclick="toggleLinkManager()">
            <h2>é“¾æ¥ç®¡ç† â–¼</h2>
        </div>
        <div class="panel-content">
            <div class="add-link-form">
                <input type="text" id="link-name" placeholder="é“¾æ¥åç§°">
                <input type="url" id="link-url" placeholder="é“¾æ¥åœ°å€">
                <select id="link-category">
                    <option value="å¸¸ç”¨å·¥å…·">å¸¸ç”¨å·¥å…·</option>
                    <option value="å¼€å‘èµ„æº">å¼€å‘èµ„æº</option>
                </select>
                <button onclick="addLink()">æ·»åŠ é“¾æ¥</button>
            </div>
        </div>
    </section>

    <header>
        <h1>æ¯æ—¥å¯¼èˆª</h1>
        <div class="search-box">
            <input type="text" placeholder="å¿«é€Ÿæœç´¢...">
            <button>ğŸ”</button>
        </div>
    </header>
    
    <main>
        <!-- åˆ†ç±»åŒºå— -->
        <section class="category">
            <h2>å¸¸ç”¨å·¥å…·</h2>
            <div class="links">
                <a href="https://www.baidu.com" target="_blank">ç™¾åº¦æœç´¢</a>
                <a href="https://www.zhihu.com" target="_blank">çŸ¥ä¹</a>
                <a href="https://mail.qq.com" target="_blank">QQé‚®ç®±</a>
            </div>
        </section>

        <section class="category">
            <h2>å¼€å‘èµ„æº</h2>
            <div class="links">
                <a href="https://github.com" target="_blank">GitHub</a>
                <a href="https://stackoverflow.com" target="_blank">Stack Overflow</a>
                <a href="https://developer.mozilla.org" target="_blank">MDN Web Docs</a>
            </div>
        </section>
    </main>

    <script>
        // æ•ˆæœåˆ‡æ¢åŠŸèƒ½
        function toggleEffect() {
            document.body.classList.toggle('blur-effect');
        }

        // ç®€å•æœç´¢åŠŸèƒ½
        document.querySelector('.search-box input').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.links a').forEach(link => {
                const text = link.textContent.toLowerCase();
                link.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });

        // èƒŒæ™¯åˆ‡æ¢åŠŸèƒ½
        function changeBackground() {
            const url = document.getElementById('bg-input').value;
            if(url) {
                document.body.style.backgroundImage = `url(${url})`;
                localStorage.setItem('customBg', url);
            }
        }

        function resetBackground() {
            document.body.style.backgroundImage = '';
            localStorage.removeItem('customBg');
        }

        // åˆå§‹åŒ–æ£€æŸ¥æœ¬åœ°å­˜å‚¨
        window.onload = function() {
            const savedBg = localStorage.getItem('customBg');
            if(savedBg) {
                document.body.style.backgroundImage = `url(${savedBg})`;
            }
        }

        // æ·»åŠ é“¾æ¥åŠŸèƒ½
        function addLink() {
            const name = document.getElementById('link-name').value;
            const url = document.getElementById('link-url').value;
            const category = document.getElementById('link-category').value;

            if(name && url) {
                const newLink = document.createElement('a');
                newLink.href = url;
                newLink.target = "_blank";
                newLink.textContent = name;
                newLink.innerHTML += '<span class="delete-btn" onclick="deleteLink(this)">Ã—</span>';

                const targetCategory = document.querySelector(`h2:contains('${category}')`).parentNode.querySelector('.links');
                targetCategory.appendChild(newLink);
                
                saveLinks();
            }
        }

        // åˆ é™¤é“¾æ¥åŠŸèƒ½
        function deleteLink(btn) {
            btn.parentElement.remove();
            saveLinks();
        }

        // ä¿å­˜é“¾æ¥åˆ°æœ¬åœ°å­˜å‚¨
        function saveLinks() {
            const linksData = [];
            document.querySelectorAll('.links a').forEach(link => {
                linksData.push({
                    name: link.textContent.replace('Ã—', '').trim(),
                    url: link.href,
                    category: link.closest('.category').querySelector('h2').textContent
                });
            });
            localStorage.setItem('navLinks', JSON.stringify(linksData));
        }

        // åŠ è½½ä¿å­˜çš„é“¾æ¥
        window.onload = function() {
            const savedLinks = localStorage.getItem('navLinks');
            if(savedLinks) {
                JSON.parse(savedLinks).forEach(link => {
                    // åˆ›å»ºé“¾æ¥å¹¶æ·»åŠ åˆ°å¯¹åº”åˆ†ç±»
                });
            }
        }

        // æµ®åŠ¨æŒ‰é’®èœå•æ§åˆ¶
        function toggleFabMenu() {
            document.querySelector('.fab-menu').style.display = 
                document.querySelector('.fab-menu').style.display === 'flex' ? 'none' : 'flex';
        }

        function closePanels() {
            document.getElementById('bg-control').style.display = 'none';
            document.querySelector('.fab-menu').style.display = 'none';
        }

        // èƒŒæ™¯æ§åˆ¶é¢æ¿
        function showBgControl() {
            document.getElementById('bg-control').style.display = 'block';
            closePanels();
        }

        // é“¾æ¥ç®¡ç†é¢æ¿
        function toggleLinkManager() {
            const panel = document.getElementById('link-manager');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            closePanels();
        }

        // ç‚¹å‡»å¤–éƒ¨å…³é—­èœå•
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.fab-container') && 
                !e.target.closest('.popup-panel') &&
                !e.target.closest('#link-manager')) {
                closePanels();
            }
        });

        // è§†å·®æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', () => {
            document.querySelectorAll('.parallax-layer').forEach(layer => {
                const speed = parseFloat(layer.dataset.speed);
                const yOffset = window.pageYOffset * speed;
                layer.style.transform = `translateY(${yOffset}px)`;
            });
        });

        // æ»šåŠ¨è§¦å‘åŠ¨ç”»
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.style.opacity = 1;
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.category').forEach(category => {
            observer.observe(category);
        });
    </script>
</body>
</html> 